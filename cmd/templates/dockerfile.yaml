# DevContainer Configuration
# Configuration using a custom Dockerfile

name: my-devcontainer

# Build from Dockerfile
build:
  dockerfile: Dockerfile
  context: .
  args:
    VARIANT: "20"

# Workspace configuration
workspaceFolder: /workspace
remoteUser: vscode

# Container environment variables
containerEnv:
  NODE_ENV: development
  API_URL: http://localhost:3000

# Port forwarding
forwardPorts:
  - 3000
  - 5432

portsAttributes:
  "3000":
    label: "Application"
    onAutoForward: openBrowser
  "5432":
    label: "Database"
    onAutoForward: silent

# Mounts
mounts:
  - type: bind
    source: ./data
    target: /data

# Features
features:
  ghcr.io/devcontainers/features/git:1: {}
  ghcr.io/devcontainers/features/github-cli:1: {}

# Lifecycle hooks
postCreateCommand: npm install
postStartCommand: npm run dev

# VS Code customizations
customizations:
  vscode:
    extensions:
      - dbaeumer.vscode-eslint
      - esbenp.prettier-vscode
      - ms-azuretools.vscode-docker
    settings:
      editor.formatOnSave: true
      editor.defaultFormatter: esbenp.prettier-vscode
